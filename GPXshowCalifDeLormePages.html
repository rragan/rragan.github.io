<html><head>
	<title>Convert GPX to DeLorme pages</title>
	<meta charset="utf-8">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script>
	var norcalGrid = [
	[42.009722,41.5,-123.9375,-124.375,"Page 022"],
	[42.009722,41.5,-123.5,-123.9375,"Page 023"],
	[42.009722,41.5,-123.0625,-123.5,"Page 024"],
	[42.009722,41.5,-122.625,-123.0625,"Page 025"],
	[42.009722,41.5,-122.1875,-122.625,"Page 026"],
	[42.009722,41.5,-121.75,-122.1875,"Page 027"],
	[42.009722,41.5,-121.3125,-121.75,"Page 028"],
	[42.009722,41.5,-120.875,-121.3125,"Page 029"],
	[42.009722,41.5,-120.4375,-120.875,"Page 030"],
	[42.009722,41.5,-119.998056,-120.4375,"Page 031"],
	[41.5,41.0,-123.9375,-124.375,"Page 032"],
	[41.5,41.0,-123.5,-123.9375,"Page 033"],
	[41.5,41.0,-123.0625,-123.5,"Page 034"],
	[41.5,41.0,-122.625,-123.0625,"Page 035"],
	[41.5,41.0,-122.1875,-122.625,"Page 036"],
	[41.5,41.0,-121.75,-122.1875,"Page 037"],
	[41.5,41.0,-121.3125,-121.75,"Page 038"],
	[41.5,41.0,-120.875,-121.3125,"Page 039"],
	[41.5,41.0,-120.4375,-120.875,"Page 040"],
	[41.5,41.0,-119.998056,-120.4375,"Page 041"],
	[41.0,40.5,-123.945833,-124.391667,"Page 042"],
	[41.0,40.5,-123.5,-123.945833,"Page 043"],
	[41.0,40.5,-123.0625,-123.5,"Page 044"],
	[41.0,40.5,-122.625,-123.0625,"Page 045"],
	[41.0,40.5,-122.1875,-122.625,"Page 046"],
	[41.0,40.5,-121.75,-122.1875,"Page 047"],
	[41.0,40.5,-121.3125,-121.75,"Page 048"],
	[41.0,40.5,-120.875,-121.3125,"Page 049"],
	[41.0,40.5,-120.4375,-120.875,"Page 050"],
	[41.0,40.5,-120.0,-120.4375,"Page 051"],
	[40.5,40.0,-123.956389,-124.416667,"Page 052"],
	[40.5,40.0,-123.5,-123.956389,"Page 053"],
	[40.5,40.0,-123.0625,-123.5,"Page 054"],
	[40.5,40.0,-122.625,-123.0625,"Page 055"],
	[40.5,40.0,-122.1875,-122.625,"Page 056"],
	[40.5,40.0,-121.75,-122.1875,"Page 057"],
	[40.5,40.0,-121.3125,-121.75,"Page 058"],
	[40.5,40.0,-120.875,-121.3125,"Page 059"],
	[40.5,40.0,-120.4375,-120.875,"Page 060"],
	[40.5,40.0,-119.995278,-120.4375,"Page 061"],
	[40.0,39.5,-123.9375,-124.375,"Page 062"],
	[40.0,39.5,-123.5,-123.9375,"Page 063"],
	[40.0,39.5,-123.0625,-123.5,"Page 064"],
	[40.0,39.5,-122.625,-123.0625,"Page 065"],
	[40.0,39.5,-122.1875,-122.625,"Page 066"],
	[40.0,39.5,-121.75,-122.1875,"Page 067"],
	[40.0,39.5,-121.3125,-121.75,"Page 068"],
	[40.0,39.5,-120.875,-121.3125,"Page 069"],
	[40.0,39.5,-120.4375,-120.875,"Page 070"],
	[40.0,39.5,-119.996667,-120.4375,"Page 071"],
	[39.0,38.708889,-123.5,-123.77,"Page 072"],
	[39.5,39.0,-123.5,-123.9375,"Page 073"],
	[39.5,39.0,-123.0625,-123.5,"Page 074"],
	[39.5,39.0,-122.625,-123.0625,"Page 075"],
	[39.5,39.0,-122.1875,-122.625,"Page 076"],
	[39.5,39.0,-121.75,-122.1875,"Page 077"],
	[39.5,39.0,-121.3125,-121.75,"Page 078"],
	[39.5,39.0,-120.875,-121.3125,"Page 079"],
	[39.5,39.0,-120.4375,-120.875,"Page 080"],
	[39.5,39.0,-120.0,-120.4375,"Page 081"],
	[39.0,38.5,-123.0625,-123.5,"Page 082"],
	[39.0,38.5,-122.625,-123.0625,"Page 083"],
	[39.0,38.5,-122.1875,-122.625,"Page 084"],
	[39.0,38.5,-121.75,-122.1875,"Page 085"],
	[39.0,38.5,-121.3125,-121.75,"Page 086"],
	[39.0,38.5,-120.875,-121.3125,"Page 087"],
	[39.0,38.5,-120.4375,-120.875,"Page 088"],
	[39.0,38.5,-120.0,-120.4375,"Page 089"],
	[39.0,38.5,-119.5625,-120.0,"Page 090"],
	[39.0,38.5,-119.125,-119.5625,"Page 091"],
	[38.5,38.0,-123.0625,-123.5,"Page 092"],
	[38.5,38.0,-122.625,-123.0625,"Page 093"],
	[38.5,38.0,-122.1875,-122.625,"Page 094"],
	[38.5,38.0,-121.75,-122.1875,"Page 095"],
	[38.5,38.0,-121.3125,-121.75,"Page 096"],
	[38.5,38.0,-120.875,-121.3125,"Page 097"],
	[38.5,38.0,-120.4375,-120.875,"Page 098"],
	[38.5,38.0,-120.0,-120.4375,"Page 099"],
	[38.5,38.0,-119.5625,-120.0,"Page 100"],
	[38.5,38.0,-119.125,-119.5625,"Page 101"],
	[38.441667,38.0,-118.6875,-119.125,"Page 102"],
	[38.0,37.5,-122.625,-123.0625,"Page 103"],
	[38.133333,38.0,-118.483333,-118.6875,"Page 103"],
	[38.0,37.5,-122.1875,-122.625,"Page 104"],
	[38.0,37.5,-121.75,-122.1875,"Page 105"],
	[38.0,37.5,-121.3125,-121.75,"Page 106"],
	[38.0,37.5,-120.875,-121.3125,"Page 107"],
	[38.0,37.5,-120.4375,-120.875,"Page 108"],
	[38.0,37.5,-120.0,-120.4375,"Page 109"],
	[38.0,37.5,-119.5625,-120.0,"Page 110"],
	[38.0,37.5,-119.125,-119.5625,"Page 111"],
	[38.0,37.5,-118.6875,-119.125,"Page 112"],
	[38.0,37.5,-118.25,-118.6875,"Page 113"],
	[37.5,37.0,-122.1875,-122.625,"Page 114"],
	[37.796944,37.5,-117.866667,-118.25,"Page 114"],
	[37.5,37.0,-121.75,-122.1875,"Page 115"],
	[37.5,37.0,-121.3125,-121.75,"Page 116"],
	[37.5,37.0,-120.875,-121.3125,"Page 117"],
	[37.5,37.0,-120.4375,-120.875,"Page 118"],
	[37.5,37.0,-120.0,-120.4375,"Page 119"],
	[37.5,37.0,-119.5625,-120.0,"Page 120"],
	[37.5,37.0,-119.125,-119.5625,"Page 121"],
	[37.5,37.0,-118.6875,-119.125,"Page 122"],
	[37.5,37.0,-118.25,-118.6875,"Page 123"],
	[37.5,37.0,-117.8125,-118.25,"Page 124"],
	[37.5,37.0,-117.203889,-117.8125,"Page 125"]
];

var socalGrid = [
[37.000000,36.500000,-121.812500,-122.250000,"Page 18"],
[37.000000,36.500000,-121.375000,-121.812500,"Page 19"],
[37.000000,36.500000,-120.937500,-121.375000,"Page 20"],
[37.000000,36.500000,-120.500000,-120.937500,"Page 21"],
[37.000000,36.500000,-120.062500,-120.500000,"Page 22"],
[37.000000,36.500000,-119.625000,-120.062500,"Page 23"],
[37.000000,36.500000,-119.187500,-119.625000,"Page 24"],
[37.000000,36.500000,-118.750000,-119.187500,"Page 25"],
[37.000000,36.500000,-118.312500,-118.750000,"Page 26"],
[37.000000,36.500000,-117.875000,-118.312500,"Page 27"],
[37.000000,36.500000,-117.437500,-117.875000,"Page 28"],
[37.000000,36.500000,-117.000000,-117.437500,"Page 29"],
[36.500000,36.111110,-121.812500,-122.246110,"Page 30"],
[36.935280,36.500000,-116.562500,-117.000000,"Page 30"],
[36.500000,36.000000,-121.375000,-121.812500,"Page 31"],
[36.500000,36.000000,-120.937500,-121.375000,"Page 32"],
[36.500000,36.000000,-120.500000,-120.937500,"Page 33"],
[36.500000,36.000000,-120.062500,-120.500000,"Page 34"],
[36.500000,36.000000,-119.625000,-120.062500,"Page 35"],
[36.500000,36.000000,-119.187500,-119.625000,"Page 36"],
[36.500000,36.000000,-118.750000,-119.187500,"Page 37"],
[36.500000,36.000000,-118.312500,-118.750000,"Page 38"],
[36.500000,36.000000,-117.875000,-118.312500,"Page 39"],
[36.500000,36.000000,-117.437500,-117.875000,"Page 40"],
[36.500000,36.000000,-117.000000,-117.437500,"Page 41"],
[36.500000,36.000000,-116.562500,-117.000000,"Page 42"],
[36.500000,36.000000,-116.125000,-116.562500,"Page 43"],
[36.000000,35.753330,-121.375000,-121.684720,"Page 43"],
[36.000000,35.500000,-120.937500,-121.375000,"Page 44"],
[36.206670,36.000000,-115.857500,-116.125000,"Page 44"],
[36.000000,35.500000,-120.500000,-120.937500,"Page 45"],
[36.000000,35.500000,-120.062500,-120.500000,"Page 46"],
[36.000000,35.500000,-119.625000,-120.062500,"Page 47"],
[36.000000,35.500000,-119.187500,-119.625000,"Page 48"],
[36.000000,35.500000,-118.750000,-119.187500,"Page 49"],
[36.000000,35.500000,-118.312500,-118.750000,"Page 50"],
[36.000000,35.500000,-117.875000,-118.312500,"Page 51"],
[36.000000,35.500000,-117.437500,-117.875000,"Page 52"],
[36.000000,35.500000,-117.000000,-117.437500,"Page 53"],
[36.000000,35.500000,-116.562500,-117.000000,"Page 54"],
[36.000000,35.500000,-116.125000,-116.562500,"Page 55"],
[36.000000,35.500000,-115.687500,-116.125000,"Page 56"],
[36.000000,35.500000,-115.250000,-115.687500,"Page 57"],
[35.500000,35.000000,-120.500000,-120.937500,"Page 59"],
[35.500000,35.000000,-120.062500,-120.500000,"Page 60"],
[35.500000,35.000000,-119.625000,-120.062500,"Page 61"],
[35.500000,35.000000,-119.187500,-119.625000,"Page 62"],
[35.500000,35.000000,-118.750000,-119.187500,"Page 63"],
[35.500000,35.000000,-118.312500,-118.750000,"Page 64"],
[35.500000,35.000000,-117.875000,-118.312500,"Page 65"],
[35.500000,35.000000,-117.437500,-117.875000,"Page 66"],
[35.500000,35.000000,-117.000000,-117.437500,"Page 67"],
[35.500000,35.000000,-116.562500,-117.000000,"Page 68"],
[35.500000,35.000000,-116.125000,-116.562500,"Page 69"],
[35.500000,35.000000,-115.687500,-116.125000,"Page 70"],
[35.500000,35.000000,-115.250000,-115.687500,"Page 71"],
[35.500000,35.000000,-114.812500,-115.250000,"Page 72"],
[35.000000,34.500000,-120.500000,-120.937500,"Page 73"],
[35.500000,35.000000,-114.559170,-114.812500,"Page 73"],
[35.000000,34.500000,-120.062500,-120.500000,"Page 74"],
[35.000000,34.500000,-119.625000,-120.062500,"Page 75"],
[35.000000,34.500000,-119.187500,-119.625000,"Page 76"],
[35.000000,34.500000,-118.750000,-119.187500,"Page 77"],
[35.000000,34.500000,-118.312500,-118.750000,"Page 78"],
[35.000000,34.500000,-117.875000,-118.312500,"Page 79"],
[35.000000,34.500000,-117.437500,-117.875000,"Page 80"],
[35.000000,34.500000,-117.000000,-117.437500,"Page 81"],
[35.000000,34.500000,-116.562500,-117.000000,"Page 82"],
[35.000000,34.500000,-116.125000,-116.562500,"Page 83"],
[35.000000,34.500000,-115.687500,-116.125000,"Page 84"],
[35.000000,34.500000,-115.250000,-115.687500,"Page 85"],
[35.000000,34.500000,-114.812500,-115.250000,"Page 86"],
[35.000000,34.500000,-114.375000,-114.812500,"Page 87"],
[34.500000,34.345000,-120.062500,-120.500000,"Page 88"],
[34.500000,34.345000,-119.625000,-120.062500,"Page 89"],
[34.500000,34.100000,-119.187500,-119.625000,"Page 90"],
[34.500000,34.000000,-118.750000,-119.187500,"Page 91"],
[34.500000,34.000000,-118.312500,-118.750000,"Page 92"],
[34.500000,34.000000,-117.875000,-118.312500,"Page 93"],
[34.500000,34.000000,-117.437500,-117.875000,"Page 94"],
[34.500000,34.000000,-117.000000,-117.437500,"Page 95"],
[34.500000,34.000000,-116.562500,-117.000000,"Page 96"],
[34.500000,34.000000,-116.125000,-116.562500,"Page 97"],
[34.500000,34.000000,-115.687500,-116.125000,"Page 98"],
[34.500000,34.000000,-115.250000,-115.687500,"Page 99"],
[34.500000,34.000000,-114.812500,-115.250000,"Page 100"],
[34.500000,34.000000,-114.375000,-114.812500,"Page 101"],
[34.500000,34.000000,-114.102220,-114.375000,"Page 102"],
[34.000000,33.500000,-118.312500,-118.700000,"Page 102"],
[34.000000,33.500000,-117.875000,-118.312500,"Page 103"],
[34.000000,33.500000,-117.437500,-117.875000,"Page 104"],
[34.000000,33.500000,-117.000000,-117.437500,"Page 105"],
[34.000000,33.500000,-116.562500,-117.000000,"Page 106"],
[34.000000,33.500000,-116.125000,-116.562500,"Page 107"],
[34.000000,33.500000,-115.687500,-116.125000,"Page 108"],
[34.000000,33.500000,-115.250000,-115.687500,"Page 109"],
[34.000000,33.500000,-114.812500,-115.250000,"Page 110"],
[34.000000,33.500000,-114.375000,-114.812500,"Page 111"],
[33.500000,33.200000,-117.437500,-118.650000,"Page 112"],
[33.500000,33.000000,-117.000000,-117.437500,"Page 113"],
[33.500000,33.000000,-116.562500,-117.000000,"Page 114"],
[33.500000,33.000000,-116.125000,-116.562500,"Page 115"],
[33.500000,33.000000,-115.687500,-116.125000,"Page 116"],
[33.500000,33.000000,-115.250000,-115.687500,"Page 117"],
[33.500000,33.000000,-114.812500,-115.250000,"Page 118"],
[33.500000,33.000000,-114.375000,-114.812500,"Page 119"],
[33.000000,32.500000,-117.000000,-117.437500,"Page 121"],
[33.000000,32.500000,-116.562500,-117.000000,"Page 122"],
[33.000000,32.500000,-116.125000,-116.562500,"Page 123"],
[33.000000,32.500000,-115.687500,-116.125000,"Page 124"],
[33.000000,32.500000,-115.250000,-115.687500,"Page 125"],
[33.000000,32.500000,-114.812500,-115.250000,"Page 126"],
[33.000000,32.500000,-114.375000,-114.812500,"Page 127"],
[35.500000,35.000000,-120.937500,-121.375000,"Page 58"]
];

var goldenStateGrid = [
[42.008330,41.366670,-123.850000,-124.433330,"Page 022"],
[42.008330,41.366670,-123.266670,-123.850000,"Page 023"],
[42.008330,41.366670,-122.683330,-123.266670,"Page 024"],
[42.008330,41.366670,-122.100000,-122.683330,"Page 025"],
[42.008330,41.366670,-121.516670,-122.100000,"Page 026"],
[42.008330,41.366670,-120.933330,-121.516670,"Page 027"],
[42.008330,41.366670,-120.350000,-120.933330,"Page 028"],
[42.008330,41.366670,-119.766670,-120.350000,"Page 029"],
[41.366670,40.725000,-123.850000,-124.433330,"Page 030"],
[41.366670,40.725000,-123.266670,-123.850000,"Page 031"],
[41.366670,40.725000,-122.683330,-123.266670,"Page 032"],
[41.366670,40.725000,-122.100000,-122.683330,"Page 033"],
[41.366670,40.725000,-121.516670,-122.100000,"Page 034"],
[41.366670,40.725000,-120.933330,-121.516670,"Page 035"],
[41.366670,40.725000,-120.350000,-120.933330,"Page 036"],
[41.366670,40.725000,-119.766670,-120.350000,"Page 037"],
[40.725000,40.083330,-123.850000,-124.433330,"Page 038"],
[40.725000,40.083330,-123.266670,-123.850000,"Page 039"],
[40.725000,40.083330,-122.683330,-123.266670,"Page 040"],
[40.725000,40.083330,-122.100000,-122.683330,"Page 041"],
[40.725000,40.083330,-121.516670,-122.100000,"Page 042"],
[40.725000,40.083330,-120.933330,-121.516670,"Page 043"],
[40.725000,40.083330,-120.350000,-120.933330,"Page 044"],
[40.725000,40.083330,-119.766670,-120.350000,"Page 045"],
[40.083330,39.441670,-123.850000,-124.433330,"Page 046"],
[40.083330,39.441670,-123.266670,-123.850000,"Page 047"],
[40.083330,39.441670,-122.683330,-123.266670,"Page 048"],
[40.083330,39.441670,-122.100000,-122.683330,"Page 049"],
[40.083330,39.441670,-121.516670,-122.100000,"Page 050"],
[40.083330,39.441670,-120.933330,-121.516670,"Page 051"],
[40.083330,39.441670,-120.350000,-120.933330,"Page 052"],
[40.083330,39.441670,-119.766670,-120.350000,"Page 053"],
[39.441670,38.800000,-123.266670,-123.850000,"Page 054"],
[39.441670,38.800000,-122.683330,-123.266670,"Page 055"],
[39.441670,38.800000,-122.100000,-122.683330,"Page 056"],
[39.441670,38.800000,-121.516670,-122.100000,"Page 057"],
[39.441670,38.800000,-120.933330,-121.516670,"Page 058"],
[39.441670,38.800000,-120.350000,-120.933330,"Page 059"],
[39.441670,38.800000,-119.766670,-120.350000,"Page 060"],
[38.800000,38.158330,-123.266670,-123.850000,"Page 061"],
[38.800000,38.158330,-122.683330,-123.266670,"Page 062"],
[38.800000,38.158330,-122.100000,-122.683330,"Page 063"],
[38.800000,38.158330,-121.516670,-122.100000,"Page 064"],
[38.800000,38.158330,-120.933330,-121.516670,"Page 065"],
[38.800000,38.158330,-120.350000,-120.933330,"Page 066"],
[38.800000,38.158330,-119.766670,-120.350000,"Page 067"],
[38.800000,38.158330,-119.183330,-119.766670,"Page 068"],
[38.800000,38.158330,-118.600000,-119.183330,"Page 069"],
[38.891670,38.800000,-119.650000,-119.766670,"Page 069"],
[38.158330,37.516670,-122.683330,-123.266670,"Page 070"],
[38.158330,37.516670,-122.100000,-122.683330,"Page 071"],
[38.158330,37.516670,-121.516670,-122.100000,"Page 072"],
[38.158330,37.516670,-120.933330,-121.516670,"Page 073"],
[38.158330,37.516670,-120.350000,-120.933330,"Page 074"],
[38.158330,37.516670,-119.766670,-120.350000,"Page 075"],
[38.158330,37.516670,-119.183330,-119.766670,"Page 076"],
[38.158330,37.516670,-118.600000,-119.183330,"Page 077"],
[38.158330,37.516670,-118.016670,-118.600000,"Page 078"],
[37.516670,36.875000,-122.100000,-122.683330,"Page 080"],
[37.516670,36.875000,-121.516670,-122.100000,"Page 081"],
[37.516670,36.875000,-120.933330,-121.516670,"Page 082"],
[37.516670,36.875000,-120.350000,-120.933330,"Page 083"],
[37.516670,36.875000,-119.766670,-120.350000,"Page 084"],
[37.516670,36.875000,-119.183330,-119.766670,"Page 085"],
[37.516670,36.875000,-118.600000,-119.183330,"Page 086"],
[37.516670,36.875000,-118.016670,-118.600000,"Page 087"],
[37.516670,36.875000,-117.433330,-118.016670,"Page 088"],
[37.516670,36.875000,-116.850000,-117.433330,"Page 089"],
[36.875000,36.233330,-121.516670,-122.100000,"Page 090"],
[36.875000,36.233330,-120.933330,-121.516670,"Page 091"],
[36.875000,36.233330,-120.350000,-120.933330,"Page 092"],
[36.875000,36.233330,-119.766670,-120.350000,"Page 093"],
[36.875000,36.233330,-119.183330,-119.766670,"Page 094"],
[36.875000,36.233330,-118.600000,-119.183330,"Page 095"],
[36.875000,36.233330,-118.016670,-118.600000,"Page 096"],
[36.875000,36.233330,-117.433330,-118.016670,"Page 097"],
[36.875000,36.233330,-116.850000,-117.433330,"Page 098"],
[36.875000,36.233330,-116.266670,-116.850000,"Page 099"],
[36.325000,36.233330,-116.150000,-116.266670,"Page 099"],
[36.233330,35.591670,-121.516670,-122.100000,"Page 100"],
[36.233330,35.591670,-120.933330,-121.516670,"Page 101"],
[36.233330,35.591670,-120.350000,-120.933330,"Page 102"],
[36.233330,35.591670,-119.766670,-120.350000,"Page 103"],
[36.233330,35.591670,-119.183330,-119.766670,"Page 104"],
[36.233330,35.591670,-118.600000,-119.183330,"Page 105"],
[36.233330,35.591670,-118.016670,-118.600000,"Page 106"],
[36.233330,35.591670,-117.433330,-118.016670,"Page 107"],
[36.233330,35.591670,-116.850000,-117.433330,"Page 108"],
[36.233330,35.591670,-116.266670,-116.850000,"Page 109"],
[36.233330,35.591670,-115.683330,-116.266670,"Page 110"],
[36.233330,35.591670,-115.100000,-115.683330,"Page 111"],
[35.591670,34.950000,-120.933330,-121.516670,"Page 112"],
[35.591670,34.950000,-120.350000,-120.933330,"Page 113"],
[35.591670,34.950000,-119.766670,-120.350000,"Page 114"],
[35.591670,34.950000,-119.183330,-119.766670,"Page 115"],
[35.591670,34.950000,-118.600000,-119.183330,"Page 116"],
[35.591670,34.950000,-118.016670,-118.600000,"Page 117"],
[35.591670,34.950000,-117.433330,-118.016670,"Page 118"],
[35.591670,34.950000,-116.850000,-117.433330,"Page 119"],
[35.591670,34.950000,-116.266670,-116.850000,"Page 120"],
[35.591670,34.950000,-115.683330,-116.266670,"Page 121"],
[35.591670,34.950000,-115.100000,-115.683330,"Page 122"],
[35.591670,34.950000,-114.516670,-115.100000,"Page 123"],
[34.950000,34.308330,-120.350000,-120.933330,"Page 124"],
[34.950000,34.308330,-119.766670,-120.350000,"Page 125"],
[34.950000,34.308330,-119.183330,-119.766670,"Page 126"],
[34.950000,34.308330,-118.600000,-119.183330,"Page 127"],
[34.950000,34.308330,-118.016670,-118.600000,"Page 128"],
[34.950000,34.308330,-117.433330,-118.016670,"Page 129"],
[34.950000,34.308330,-116.850000,-117.433330,"Page 130"],
[34.950000,34.308330,-116.266670,-116.850000,"Page 131"],
[34.950000,34.308330,-115.683330,-116.266670,"Page 132"],
[34.950000,34.308330,-115.100000,-115.683330,"Page 133"],
[34.950000,34.308330,-114.516670,-115.100000,"Page 134"],
[34.950000,34.308330,-113.933330,-114.516670,"Page 135"],
[34.308330,33.941670,-119.183330,-119.766670,"Page 138"],
[34.308330,33.941670,-118.600000,-119.183330,"Page 139"],
[33.525000,33.250000,-118.283330,-118.633330,"Page 139 Catalina"],
[34.308330,33.666670,-118.016670,-118.600000,"Page 140"],
[34.308330,33.666670,-117.433330,-118.016670,"Page 141"],
[34.308330,33.666670,-116.850000,-117.433330,"Page 142"],
[34.308330,33.666670,-116.266670,-116.850000,"Page 143"],
[34.308330,33.666670,-115.683330,-116.266670,"Page 144"],
[34.308330,33.666670,-115.100000,-115.683330,"Page 145"],
[34.308330,33.666670,-114.516670,-115.100000,"Page 146"],
[34.308330,33.666670,-113.933330,-114.516670,"Page 147"],
[33.666670,33.025000,-117.433330,-118.016670,"Page 148"],
[33.666670,33.025000,-116.850000,-117.433330,"Page 149"],
[33.666670,33.025000,-116.266670,-116.850000,"Page 150"],
[33.666670,33.025000,-115.683330,-116.266670,"Page 151"],
[33.666670,33.025000,-115.100000,-115.683330,"Page 152"],
[33.666670,33.025000,-114.516670,-115.100000,"Page 153"],
[33.025000,32.383330,-116.850000,-117.433330,"Page 154"],
[33.025000,32.383330,-116.266670,-116.850000,"Page 155"],
[33.025000,32.383330,-115.683330,-116.266670,"Page 156"],
[33.025000,32.383330,-115.100000,-115.683330,"Page 157"],
[33.025000,32.383330,-114.516670,-115.100000,"Page 158"],
[33.025000,32.383330,-113.933330,-114.516670,"Page 159"]
];

// Check for the various File API support.
if (window.File && window.FileReader && window.FileList && window.Blob) {
  // Great success! All the File APIs are supported.
} else {
  alert('The File APIs are not fully supported in this browser.');
}

var output = [];
var error = [];

function updateView(selectedValue) {
	output.sort();
	if (selectedValue == "All") {
		output.unshift("Northern Cal \tGC Code \tSouthern Cal \tGolden State");
	}
	else if (selectedValue == "GoldenState") {
		output.unshift("Golden State \tGC Code");
	}
	else if (selectedValue == "NCal") {
		output.unshift("Northern Cal \tGC Code");
	}
   else if (selectedValue == "SCal") {
		output.unshift("Southern Cal \tGC Code");
	}
	document.getElementById('list').innerHTML = output.join('\n');
	document.getElementById('error').innerHTML = '<ul>' + error.join('') + '</ul>';
	output=[];
}

function pointInRect(x1, y1, x2, y2, x, y) {
  return (x <= x1 && x >= x2) && (y <= y1 && y >= y2);
}

function copyToClip() {
	var button = document.getElementById("button");
	button.onclick = function(){
	    document.getElementById('list').select();
	    document.execCommand('copy');
	}
}

function getNorCalPage (north, west) {
	var norcalPage = "";
	for (var i=0; i< norcalGrid.length; i++ ) {
	  var gridRect = norcalGrid[i];
	  if ( pointInRect( gridRect[0], gridRect[2], gridRect[1], gridRect[3], north, west )) {
		norcalPage = gridRect[4];
		return norcalPage;
		}
	  };
}

function getSoCalPage (north, west) {
	var goldenStatePage = "";
	for (var i=0; i< socalGrid.length; i++ ) {
	  var gridRect = socalGrid[i];
	  if ( pointInRect( gridRect[0], gridRect[2], gridRect[1], gridRect[3], north, west )) {
		socalPage = gridRect[4];
		return socalPage;
		}
	  }
}

function getGoldenStatePage (north, west) {
	var goldenStatePage = "";
	for (var i=0; i< goldenStateGrid.length; i++ ) {
	  var gridRect = goldenStateGrid[i];
	  if ( pointInRect( gridRect[0], gridRect[2], gridRect[1], gridRect[3], north, west )) {
		goldenStatePage = gridRect[4];
		return goldenStatePage;
		}
	  }
}

function handleFileSelect(evt) {
	var button = document.getElementById("button");
	button.onclick = function(){
	    document.getElementById('list').select();
	    document.execCommand('copy');
	}
	const rbs = document.querySelectorAll('input[name="which"]');
	var selectedValue;
	for (const rb of rbs) {
		if (rb.checked) {
			selectedValue = rb.value;
		}
	}
	var files = evt.target.files; // FileList object

	// files is a FileList of File objects.
	var coords = "";
	for (var i = 0, f; f = files[i]; i++) {
		var reader = new FileReader();
		reader.onloadend = function(evt) {
			if (evt.target.readyState == FileReader.DONE) {
				var rewpt = /<wpt lat=\"([0-9\.]+)\"\slon=\"(-[0-9\.]+)\"/g, matchwpt;
				var re = /<name>(GC[A-Z0-9]*)<\/name>/g, match;
				while (match = re.exec(evt.target.result)) {
					matchwpt = rewpt.exec(evt.target.result);
					var northPage = getNorCalPage(matchwpt[1],matchwpt[2]);

					var southPage = getSoCalPage(matchwpt[1],matchwpt[2]);
					var goldenPage = getGoldenStatePage(matchwpt[1],matchwpt[2]);
					if (selectedValue === "All") {
						output.push(northPage + "  \t" + match[1] + "  \t" + southPage + "   \t" + goldenPage);
					}
					else if (selectedValue == "GoldenState") {
						output.push(goldenPage + "  \t" + match[1]);
					}
					else if (selectedValue == "NCal") {
						output.push(northPage + "  \t" + match[1]);
					}
               else if (selectedValue == "SCal") {
						output.push(southPage + "  \t" + match[1]);
					}
					evt.target.result = "";
					coords = "";
				}
			}
			updateView(selectedValue);
		}
		reader.readAsText(f);
    };
}

$(document).ready(function(){
  document.getElementById('files').addEventListener('change', handleFileSelect, false);
});
	</script>
</head>
<body>
<h3>Show DeLorme page from GPX</h3>
	<input name="which" type="radio" value="NCal" checked> NorCal&nbsp;
	<input name="which" type="radio" value="SCal" checked> SoCal&nbsp;
	<input name="which" type="radio" value="GoldenState"> Golden State&nbsp;
	<input name="which" type="radio" value="All"> All&nbsp;&nbsp;&nbsp;
	GPX: <input type="file" id="files" name="files[]"> <br>
	<textarea id="list" rows="25" cols="80"></textarea>
	<input id="button" type="button" value="Copy to Clip" />
	<br><b>Reload page to run again</b>

	<div id="error"></div>

</body></html>
